---
interface Props {
  src: string;
  className?: string;
  width?: string;
  height?: string;
}

const { src, className = "", width = "100%", height = "100%" } = Astro.props;
---

<script>
  import "@lottiefiles/lottie-player";
</script>

<lottie-player
  src={src}
  background="transparent"
  speed="1"
  class={className}
  style={`width: ${width}; height: ${height};`}
  loop
  autoplay
  renderer="svg"
>
</lottie-player>

<script>
  // Handle loading errors
  document.addEventListener("DOMContentLoaded", () => {
    const players = document.querySelectorAll("lottie-player");
    players.forEach((player) => {
      player.addEventListener("error", (e) => {
        console.error("Lottie animation failed to load:", e);
        // Optionally replace with a fallback
        player.innerHTML = "⚡️";
      });
    });
  });
</script>
